---
import BlogFooter from '@/components/BlogFooter.astro'
import Breadcrumb from '@/components/Breadcrumb.astro'
import NavBar from '@/components/NavBar.astro'

import '@/styles/global.css'

const { content } = Astro.props

// Auto-infer breadcrumb items from pathname
const pathname = Astro.url.pathname
const items = [{ href: '/', label: 'Home' }]

if (pathname !== '/') {
  const segments = pathname.split('/').filter(Boolean)
  segments.forEach((segment, index) => {
    const href = `/${segments.slice(0, index + 1).join('/')}`
    let label
      = segment.charAt(0).toUpperCase() + segment.slice(1).replace(/-/g, ' ')
    if (segment === 'blog' && segments.length > 1) {
      label = 'Blog'
    }
    items.push({
      href: href + (index === segments.length - 1 ? '' : '/'),
      label,
    })
  })
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{content.title} | inogai - Alex Chen</title>
  </head>
  <body>
    <div class="flex min-h-screen flex-col">
      <NavBar />
      <main class="container mx-auto flex-1 px-4 py-8">
        <Breadcrumb items={items} />
        <slot />
      </main>
      <BlogFooter />
    </div>
  </body>
</html>
