---
import Link from '@/components/Link.astro'
import { cn } from '@/lib/utils.js'

const { href } = Astro.props

const locale = Astro.params.locale || 'en'
const hrefWithLocale
  = href.startsWith('/') && !href.match(/^\/(en|zh)\//)
    ? `/${locale}${href}`
    : href

const isActive = hrefWithLocale === Astro.url.pathname
---

<Link
  href={href}
  class={cn(
    `
      flex h-full items-center px-3
      hover:bg-primary/10 hover:underline
      focus:underline
    `,
    isActive && 'pointer-events-none bg-primary text-primary-foreground',
  )}
>
  <slot />
</Link>
